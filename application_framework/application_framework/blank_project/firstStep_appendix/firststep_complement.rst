-----------------------------------
初期セットアップ手順　補足事項
-----------------------------------

H2のデータの確認方法
------------------------------------

トラブルシューティング等でH2に格納されているデータを確認する場合、以下のようにしてH2のコンソールを起動する。

1.h2/bin/h2.batを実行する。

.. tip::

  データを確認したいプロジェクトに含まれるh2.batを起動すること。


2.しばらく待つとブラウザが起動するので、各項目に以下の通りに入力し、[Test Connection]ボタンをクリックする。

============= ========================= ============================================================================
項目          値                        補足
============= ========================= ============================================================================
JDBC URL      ``jdbc:h2:../db/SAMPLE``  h2.batからの相対パスでデータファイルの位置を指定する。
User Name     ``SAMPLE``
Password      ``SAMPLE``
============= ========================= ============================================================================

.. important ::

  URLは上記の通り入力すること。h2.batからの相対パスを指定する必要があるため、env.configからコピーするとパスがずれる。


3.画面下部に「Test successful」と表示されていることを確認する。

4.Password欄を再び入力し、[Connect]ボタンをクリックする。

.. important ::

  [Connect]ボタンクリック時に、指定したURLにH2のデータファイルが存在しない場合、H2のデータファイルが新規生成される。

  トラブルを避けるために、手順2にあるように必ず[Test Connection]をクリックして、データファイルの存在を確認すること。


5.右側のペインの上部がSQLを入力するスペースになっているので、そこに任意のSQLを入力する。

6.画面上部に存在する[Run]ボタン(緑色のボタン)をクリックすることで、SQLが実行できる。

7.左上のdisconnectボタン(赤色で書かれたアイコンのボタン)をクリックして切断する。


.. important ::

  アーキタイプから生成したプロジェクトはH2の組み込みモードを使用している。組み込みモード使用時は、1プロセスからのみ接続を受け付ける。

  そのため、 **切断を忘れると、アプリケーションからH2に接続できなくなる。**


.. _firstStepBuiltInTools:

アーキタイプから生成したプロジェクトに組み込まれているツール
------------------------------------------------------------

以下のツールが、アーキタイプから生成したプロジェクトには組み込まれている。

.. list-table::
  :header-rows: 1
  :class: white-space-normal
  :widths: 7,8,18

  * - ツール
    - ツールが実行されるMavenのPhase
    - 補足
  * - :doc:`/development_tools/toolbox/JspStaticAnalysis/index`
    - verify
    -
  * - カバレッジ取得
    - test
    - jacoco.execが生成されるところまで設定済み。|br|
      jacoco.execは、SonarQube及びJenkinsのプラグインで使用出来る。
  * - `gsp-dba-maven-plugin(外部サイト) <https://github.com/coastland/gsp-dba-maven-plugin>`_
    - －
    - 起動は、「mvn -P gsp gsp-dba:<ゴール名>」で行う。|br|
      例えば、「mvn -P gsp gsp-dba:generate-ddl」でgenerate-ddlの実行を行うことができる。

      また、「mvn -P gsp generate-resources」と実行することで、「generate-ddl」「execute-ddl」「generate-entity」「load-data」「export-schema」を順に実行できる。



.. important ::

  ツールの設定を変更する際は、:ref:`about_maven_parent_module` のpom.xmlを必ず理解した上で行うこと。

  pom.xmlを理解することで、多くの設定項目について **容易** に設定変更が可能になる。

.. |br| raw:: html

  <br />
