.. _`double_transmission_test`:

=========================================
二重サブミット防止機能のテスト実施方法
=========================================

Nablarch上のアプリケーションで二重サブミット防止機能は、\
サーバサイドとクライアントサイドにて機能する。\
よってリクエスト単体テストと取引単体テストではテスト方法が異なる。

以下、それぞれについてテスト実施方法を記述する。

--------------------------------------------------------------
リクエスト単体テストでの二重サブミット防止機能のテスト実施方法
--------------------------------------------------------------

リクエスト単体テストでは、サーバサイドにてテストを実施する。


二重サブミット防止機能のテスト用に、テストショットのLIST_MAPに指定するisValidTokenカラムがある。\このカラムを「false」に設定して、エラーが発生すれば二重サブミット防止機能が動いていることを確認できる。\

テストデータの記述方法詳細については「\ :ref:`request_test_testcases`\」を参照。

---------------------------------------------------------
取引単体テストでの二重サブミット防止機能のテスト実施方法
---------------------------------------------------------

取引単体テストでは、クライアントサイドにてテストを実施する。


手順は下記のとおりである。

* デバッグモードでアプリケーションを起動する。

* テスト対象のリクエストに対するアクションの処理に、ブレークポイントを設定する。

* 打鍵にてテスト対象リクエストのボタンを選択する。

* ブレークポイントで処理を止めた状態で、再度テスト対象リクエストのボタンを選択し、リクエストが送信されないことを確認する。
