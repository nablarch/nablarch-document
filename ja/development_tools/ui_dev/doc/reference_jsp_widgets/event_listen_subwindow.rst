===================================================
サブウィンドウ内イベント定義
===================================================
:doc:`event_listen_subwindow` はサブウィンドウ内で発生した各種イベントに対して
あらかじめ登録しておいたJavaScript処理をイベント発生時に実行するウィジェットである。

本ウィジェットの仕様の多くは :doc:`event_listen` と共通であるため、
以下では :doc:`event_listen` との差分のみについて述べる。
本項に記述されていない部分については別途 :doc:`event_listen` の項を参照すること。

コードサンプル
==================================

以下のソースコード例では、特定のボタンから開かれたサブウィンドウについて、
サブウィンドウ内のテーブルの各行を監視対象要素としている。
その選択リンクに対するクリックイベントが発生すると、イベントアクションを順次実行する。

イベントアクションでは選択された行の内容を、親ウィンドウ上の対応する項目に出力している。
(ここで使用しているイベントアクションの詳細については :doc:`event_write_to` を参照。)

  .. code-block:: jsp

    <event:listen_subwindow
      openTrigger = "#openSelectUserWindow"
      watchTarget = "table tr"
      event       = "a.select click">
      <event:write_to
        target = ".user_name"
        format = "{td.userName}">
      </event:write_to>
      <event:write_to
        target = ".user_id input"
        format = "{td.userId}">
      </event:write_to>

      ... (中略) ...

   </event:listen_subwindow>


仕様
=============================================

**属性値一覧**  [**◎** 必須属性 **○** 任意属性 **×** 無効(指定しても効果なし)]

========================= ================================ ============== ========== ========= ================================
名称                      内容                             タイプ         サーバ     ローカル  備考
========================= ================================ ============== ========== ========= ================================
event                     監視対象イベントの定義式         文字列         ◎          ◎

watchTarget               監視対象とするサブウィンドウ内の 文字列         ◎          ◎
                          要素を指定するセレクタ式。

windowName                監視対象ウィンドウ名             文字列         ○          ○         デフォルトでは "subwindow"

openTrigger               監視対象ウィンドウを開く         文字列         ○          ○
                          ボタン・リンクを指定する
                          セレクタ式。
                          これを指定した場合、セレクタ式に
                          合致するボタン・リンクから
                          開かれたサブウィンドウのみが
                          監視対象となる。

title                     監視するイベントの簡単な説明     文字列         ×          ×         設計書表示用

operation                 監視イベントが発生する画面操作   文字列         ×          ×         設計書表示用
                          の説明。

comment                   このイベントに対する補足説明。   文字列         ×          ×         設計書表示用

========================= ================================ ============== ========== ========= ================================



内部構造・改修時の留意点
============================================

**部品一覧**

================================================= =====================================================
パス                                              内容
================================================= =====================================================
/WEB-INF/tags/widget/event/listen_subwindow.tag   このウィジェットの実体となるタグファイル

/js/nablarch/ui/event/SubwindowListener.js        イベント監視機能を実装するJS部品。

================================================= =====================================================


