.. _setup_blank_project_for_Java21:

----------------------------------------------------------
Java21で使用する場合のセットアップ方法
----------------------------------------------------------

ブランクプロジェクトをJava21で使用する場合、各ブランクプロジェクトの疎通確認前に以下の手順を行う。

* 標準エンコーディングの変更（Windowsの場合）
* Javaバージョンの変更

標準エンコーディングの変更（Windowsの場合）
-------------------------------------------------------------

Java18で標準エンコーディングがUTF-8に変更になった。
Windowsは標準エンコーディングがShift-JISなので、文字セットを指定していない場合は文字化けを起こす。
このため、以下のようにJavaコマンドの実行時オプションとしてシステムプロパティを指定することで、Java17までと同様の動作となり文字化けを回避できる。

* ``-Dfile.encoding=COMPAT``

.. tip::
  環境変数で指定する場合は、環境変数 ``_JAVA_OPTIONS`` を使うことでオプションを設定できる。ただしログに ``Picked up _JAVA_OPTIONS: -Dfile.encoding=COMPAT`` が表示される。

.. important::
   Java17までは ``-Dfile.encoding=COMPAT`` というオプションは有効ではないので、従来の実行環境にこのオプションが適用されないように注意すること。

Javaバージョンの変更
-----------------------------

ブランクプロジェクトではソース及びclassファイルが準拠するJavaのバージョンとしてJava17が設定されているため
以下のようにファイルを変更する。

* pom.xml

.. code-block:: xml

    <!-- Javaバージョンの箇所を以下のように変更する-->
    <java.version>21</java.version>
